<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>DAS-Agenda PRO</title><script src=""></script><link rel="stylesheet" href=""><style>.completed { text-decoration: line-through; opacity: 0.5; }.tab-active { color: #3b82f6 !important; border-bottom: 3px solid #3b82f6 !important; opacity: 1 !important; }</style></head><body class="bg-slate-100 min-h-screen font-sans text-slate-900"><div id="login-screen" class="flex items-center justify-center min-h-screen px-4"><div class="bg-white p-8 rounded-3xl shadow-2xl w-full max-w-md text-center"><h2 class="text-3xl font-black mb-6">DAS-Agenda</h2><input type="email" id="email" placeholder="Email" class="w-full p-4 bg-slate-50 border rounded-2xl mb-4"><input type="password" id="password" placeholder="Contraseña" class="w-full p-4 bg-slate-50 border rounded-2xl mb-4"><button onclick="handleAuth('login')" class="w-full bg-blue-600 text-white p-4 rounded-2xl font-bold shadow-lg">Entrar</button><button onclick="handleAuth('register')" class="w-full text-blue-500 text-sm mt-4 font-bold">Crear cuenta nueva</button></div></div><div id="agenda-screen" class="hidden"><nav class="bg-white border-b sticky top-0 z-20 flex justify-between items-center px-6 py-2 shadow-sm"><h1 class="text-lg font-black italic text-blue-600">DAS-Agenda</h1><div class="flex gap-6"><button id="btn-tasks" onclick="showSection('tasks')" class="text-xs font-black py-4 tab-active uppercase tracking-widest">Tareas</button><button id="btn-tips" onclick="showSection('tips')" class="text-xs font-black py-4 opacity-40 uppercase tracking-widest">Propinas</button></div><button onclick="logout()" class="text-slate-300 hover:text-red-500 transition-all"><i class="fas fa-power-off"></i></button></nav><div id="section-tasks" class="container mx-auto p-4 max-w-4xl"><div class="bg-white p-6 rounded-3xl border border-slate-200 mb-6 mt-4 shadow-sm"><div class="flex gap-3"><input type="text" id="task-detail" placeholder="¿Qué hay que hacer?" class="flex-grow p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500"><button onclick="saveTask()" class="bg-blue-600 text-white px-8 rounded-2xl font-bold shadow-md">AÑADIR</button></div></div><div class="bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden"><table class="w-full text-left"><tbody id="task-list" class="divide-y divide-slate-100"></tbody></table></div></div><div id="section-tips" class="hidden container mx-auto p-4 max-w-6xl mt-4"><div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-1 space-y-6"><div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm"><h3 class="font-black text-xs text-slate-400 uppercase mb-4">Datos del Pago</h3><div class="space-y-4"><div><label class="text-[10px] font-bold">FECHA PAGO</label><input type="date" id="tip-date-pay" class="w-full p-2 bg-slate-50 border rounded-xl"></div><div><label class="text-[10px] font-bold text-blue-600 uppercase">Monto Total ($)&lt;/label&gt;
&lt;input type=&quot;number&quot; id=&quot;tip-total&quot; oninput=&quot;calculateTips()&quot; placeholder=&quot;0.00&quot; class=&quot;w-full p-4 bg-blue-50 border-2 border-blue-100 rounded-2xl text-3xl font-black text-blue-700 outline-none&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;bg-white p-6 rounded-3xl border border-slate-200 shadow-sm&quot;&gt;
&lt;h3 class=&quot;font-black text-xs text-slate-400 uppercase mb-4&quot;&gt;Base de Staff&lt;/h3&gt;
&lt;div class=&quot;flex gap-2 mb-4&quot;&gt;
&lt;input type=&quot;text&quot; id=&quot;new-staff-name&quot; placeholder=&quot;Nombre...&quot; class=&quot;flex-grow p-2 border rounded-xl text-sm&quot;&gt;
&lt;button onclick=&quot;addStaff()&quot; class=&quot;bg-slate-800 text-white px-4 rounded-xl shadow-md&quot;&gt;&lt;i class=&quot;fas fa-plus&quot;&gt;&lt;/i&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;ul id=&quot;staff-list-db&quot; class=&quot;space-y-2 max-h-48 overflow-y-auto&quot;&gt;&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;lg:col-span-2&quot;&gt;
&lt;div class=&quot;bg-white p-8 rounded-3xl border border-slate-200 shadow-sm min-h-[500px]&quot;&gt;
&lt;div class=&quot;flex justify-between items-center mb-6 border-b pb-4&quot;&gt;
&lt;h2 class=&quot;font-black text-2xl tracking-tighter italic&quot;&gt;Liquidación x Horas&lt;/h2&gt;
&lt;div class=&quot;text-right&quot;&gt;
&lt;span class=&quot;block text-[10px] font-bold text-slate-400 uppercase&quot;&gt;Valor Hora&lt;/span&gt;
&lt;span id=&quot;vhour-display&quot; class=&quot;text-2xl font-black text-blue-600&quot;&gt;$ 0.00</span></div></div><table class="w-full text-left"><thead><tr class="text-[10px] font-bold text-slate-300 uppercase border-b"><th class="pb-3">Nombre</th><th class="pb-3 text-center">Horas</th><th class="pb-3 text-right">A Cobrar</th></tr></thead><tbody id="distribution-table" class="divide-y divide-slate-50"></tbody></table></div></div></div></div></div><script type="module">import { initializeApp } from "";import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "";import { getFirestore, collection, addDoc, query, where, onSnapshot, doc, updateDoc, deleteDoc } from "";const firebaseConfig = {apiKey: "AIzaSyAffYd8QzcABt6bktN4xSw-XtK1jwJgYQI",authDomain: "das-agenda.firebaseapp.com",projectId: "das-agenda",storageBucket: "das-agenda.firebasestorage.app",messagingSenderId: "995103851313",appId: "1:995103851313:web:39a19797ab209439fde610"};const app = initializeApp(firebaseConfig);const auth = getAuth(app);const db = getFirestore(app);let staff = []; let currentUserId = null;window.showSection = (s) => {document.getElementById('section-tasks').classList.toggle('hidden', s !== 'tasks');document.getElementById('section-tips').classList.toggle('hidden', s !== 'tips');document.getElementById('btn-tasks').classList.toggle('tab-active', s === 'tasks');document.getElementById('btn-tips').classList.toggle('tab-active', s === 'tips');};window.handleAuth = async (t) => {const e = document.getElementById('email').value.trim();const p = document.getElementById('password').value;if(!e || !p) return alert("Completar datos");try { t === 'register' ? await createUserWithEmailAndPassword(auth, e, p) : await signInWithEmailAndPassword(auth, e, p); }catch (err) { alert("Error: " + err.message); }};window.logout = () => signOut(auth);onAuthStateChanged(auth, (user) => {if (user) {currentUserId = user.uid;document.getElementById('login-screen').classList.add('hidden');document.getElementById('agenda-screen').classList.remove('hidden');onSnapshot(query(collection(db, "tasks"), where("userId", "==", currentUserId)), (snap) => {document.getElementById('task-list').innerHTML = snap.docs.map(d => &lt;tr class=&quot;hover:bg-slate-50&quot;&gt;&lt;td class=&quot;p-4 font-bold text-slate-700&quot;&gt;${d.data().detail}&lt;/td&gt;&lt;td class=&quot;text-right p-4&quot;&gt;&lt;button onclick=&quot;deleteTask(&#39;${d.id}&#39;)&quot; class=&quot;text-slate-200 hover:text-red-500&quot;&gt;&lt;i class=&quot;fas fa-trash&quot;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;).join('');});onSnapshot(query(collection(db, "staff"), where("userId", "==", currentUserId)), (snap) => {staff = snap.docs.map(d => ({id: d.id, ...d.data()}));document.getElementById('staff-list-db').innerHTML = staff.map(s => &lt;li class=&quot;flex justify-between items-center p-2 bg-slate-50 rounded-lg text-xs border border-slate-100&quot;&gt;&lt;span&gt;${s.name}&lt;/span&gt;&lt;button onclick=&quot;deleteStaff(&#39;${s.id}&#39;)&quot; class=&quot;text-red-300&quot;&gt;×&lt;/button&gt;&lt;/li&gt;).join('');document.getElementById('distribution-table').innerHTML = staff.map(s => &lt;tr&gt;&lt;td class=&quot;py-4 font-bold text-slate-600&quot;&gt;${s.name}&lt;/td&gt;&lt;td class=&quot;py-4 text-center&quot;&gt;&lt;input type=&quot;number&quot; step=&quot;0.5&quot; value=&quot;0&quot; oninput=&quot;calculateTips()&quot; class=&quot;hour-input w-20 p-2 border rounded-xl text-center font-black&quot; data-id=&quot;${s.id}&quot;&gt;&lt;/td&gt;&lt;td class=&quot;py-4 text-right font-black text-blue-600 text-lg&quot; id=&quot;amount-${s.id}&quot;&gt;$ 0.00&lt;/td&gt;&lt;/tr&gt;).join('');});} else {document.getElementById('login-screen').classList.remove('hidden');document.getElementById('agenda-screen').classList.add('hidden');}});window.saveTask = async () => {const d = document.getElementById('task-detail').value.trim();if(d) await addDoc(collection(db, "tasks"), { detail: d, userId: currentUserId, created: Date.now() });document.getElementById('task-detail').value = '';};window.deleteTask = async (id) => { if(confirm("¿Eliminar?")) await deleteDoc(doc(db, "tasks", id)); };window.addStaff = async () => {const n = document.getElementById('new-staff-name').value.trim();if(n) await addDoc(collection(db, "staff"), { name: n, userId: currentUserId });document.getElementById('new-staff-name').value = '';};window.deleteStaff = async (id) => { if(confirm("¿Borrar?")) await deleteDoc(doc(db, "staff", id)); };window.calculateTips = () => {const total = parseFloat(document.getElementById('tip-total').value) || 0;const inputs = document.querySelectorAll('.hour-input');let hSum = 0; inputs.forEach(i => hSum += parseFloat(i.value) || 0);const vh = hSum > 0 ? total / hSum : 0;document.getElementById('vhour-display').innerText = $ ${vh.toFixed(2)};inputs.forEach(i => {const id = i.getAttribute('data-id');const val = ( (parseFloat(i.value) || 0) * vh ).toFixed(2);document.getElementById(amount-${id}).innerText = $ ${val};});};</script></body></html>
